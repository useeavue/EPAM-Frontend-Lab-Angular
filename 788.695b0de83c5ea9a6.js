"use strict";(self.webpackChunkng_course=self.webpackChunkng_course||[]).push([[788],{6788:(S,c,s)=>{s.r(c),s.d(c,{AddUpdateCourseModule:()=>Q});var u=s(9808),l=s(7848),g=s(655),m=s(9379),h=s(727),r=s(2382),t=s(1223),f=s(8422),_=s(3867);let C=(()=>{class e{constructor(o){this.titleCasePipe=o,this.removeAuthorEvent=new t.vpe,this.author={id:0,firstName:"",lastName:""}}get authorName(){return this.titleCasePipe.transform(`${this.author.firstName} ${this.author.lastName}`)}removeAuthorHandler(o){this.removeAuthorEvent.emit(o)}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.rS))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-authors"]],inputs:{author:"author"},outputs:{removeAuthorEvent:"removeAuthorEvent"},decls:5,vars:1,consts:[[1,"author"],[1,"author-name"],["type","button",1,"author-close","btn-red",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.removeAuthorHandler(n.author.id)}),t._uU(4," x "),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Oqu(n.authorName))},styles:[".author[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px;gap:10px;justify-content:space-between;border:2px solid #b9b9b9;border-radius:5px;width:-moz-fit-content;width:fit-content}.author-name[_ngcontent-%COMP%]{font-size:12px}.author-close[_ngcontent-%COMP%]{border:none;border-radius:2px;font-size:12px;cursor:pointer;color:#fff;width:18px;height:18px;transition:background-color .3s ease}"],changeDetection:0}),e})();var v=s(8105);function A(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1,"Required field"),t.qZA())}function Z(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1,"Title should be at least 3 characters long"),t.qZA())}function x(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1,"Title should be no more than 50 characters long"),t.qZA())}function b(e,a){if(1&e&&(t.TgZ(0,"div",26),t.YNc(1,A,2,0,"small",27),t.YNc(2,Z,2,0,"small",27),t.YNc(3,x,2,0,"small",27),t.qZA()),2&e){const o=t.oxw();let n,i,d;t.xp6(1),t.Q6J("ngIf",null==(n=o.formGroup.get("name"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=o.formGroup.get("name"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(d=o.formGroup.get("name"))||null==d.errors?null:d.errors.maxlength)}}function T(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1,"Required field"),t.qZA())}function U(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1,"Title should be no more than 500 characters long"),t.qZA())}function O(e,a){if(1&e&&(t.TgZ(0,"div",26),t.YNc(1,T,2,0,"small",27),t.YNc(2,U,2,0,"small",27),t.qZA()),2&e){const o=t.oxw();let n,i;t.xp6(1),t.Q6J("ngIf",null==(n=o.formGroup.get("description"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=o.formGroup.get("description"))||null==i.errors?null:i.errors.maxlength)}}function M(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1,"Required field"),t.qZA())}function w(e,a){if(1&e&&(t.TgZ(0,"div",26),t.YNc(1,M,2,0,"small",27),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.formGroup.get("date"))||null==n.errors?null:n.errors.required)}}function I(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1,"Required field, only numbers allowed"),t.qZA())}function P(e,a){if(1&e&&(t.TgZ(0,"div",26),t.YNc(1,I,2,0,"small",27),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=o.formGroup.get("length"))||null==n.errors?null:n.errors.required)}}function q(e,a){1&e&&(t.TgZ(0,"div",26),t.TgZ(1,"small"),t._uU(2,"Should be at least 1 author"),t.qZA(),t.qZA())}function N(e,a){if(1&e&&(t.TgZ(0,"option"),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o.value.firstName+" "+o.value.lastName)," ")}}function y(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-authors",28),t.NdJ("removeAuthorEvent",function(i){return t.CHM(o),t.oxw().removeAuthor(i)}),t.qZA()}2&e&&t.Q6J("author",a.$implicit.value)}const J=[{path:"",component:(()=>{class e{constructor(o,n,i,d,p){this.router=o,this.activatedRoute=n,this.coursesDataService=i,this.datePipe=d,this.titleCasePipe=p,this.heading="Add",this.formGroup=new r.cw({name:new r.NI("",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(50)]),date:new r.NI("",[r.kI.required]),length:new r.NI(0,[r.kI.required,r.kI.pattern(/^[0-9]+$/)]),description:new r.NI("",[r.kI.required,r.kI.maxLength(500)]),authorsInput:new r.NI(""),authors:new r.Oe([],[r.kI.required])}),this.courseId=+this.activatedRoute.snapshot.params.id||0,this.subscription=new h.w0}ngOnInit(){this.courseId&&this.subscription.add(this.coursesDataService.getCourseById(this.courseId).subscribe(o=>{var n;this.heading="Edit",this.formGroup.setValue({name:this.titleCasePipe.transform(o.name),date:this.datePipe.transform(o.date,"yyyy-MM-dd"),length:o.length,description:o.description,authorsInput:"",authors:[]}),null===(n=o.authors)||void 0===n||n.forEach(i=>{this.authorControls.push(new r.NI(i))})}))}ngOnDestroy(){this.subscription.unsubscribe()}get authorControls(){return this.formGroup.get("authors")}isAuthorsInvalid(){var o,n;return!(!(null===(o=this.formGroup.get("authorsInput"))||void 0===o?void 0:o.touched)||!(null===(n=this.formGroup.get("authors"))||void 0===n?void 0:n.invalid))}isFieldInvalid(o){var n,i;return!(!(null===(n=this.formGroup.get(o))||void 0===n?void 0:n.invalid)||!(null===(i=this.formGroup.get(o))||void 0===i?void 0:i.touched))}addAuthor(o){const n=o.value.split(/[ ,]+/),i={id:(0,m.Iy)(1e4,15e3),firstName:n[0],lastName:n[1]||""};this.authorControls.push(new r.NI(i)),o.value="",o.blur()}removeAuthor(o){const n=this.authorControls.controls.findIndex(i=>i.value.id===o);this.authorControls.removeAt(n)}returnHome(){this.router.navigate([""])}save(){const i=(0,g._T)(this.formGroup.value,["authorsInput"]);this.subscription.add(this.courseId?this.coursesDataService.updateCourse(Object.assign(Object.assign({},i),{id:this.courseId})).subscribe(()=>this.returnHome()):this.coursesDataService.createCourse(Object.assign(Object.assign({},i),{id:(0,m.Iy)(1e4,15e3)})).subscribe(()=>this.returnHome()))}close(){this.returnHome()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(f.q),t.Y36(u.uU),t.Y36(u.rS))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-update-course"]],features:[t._Bn([u.uU,u.rS])],decls:48,vars:14,consts:[[1,"add-update-course-window"],["novalidate","",1,"form",3,"formGroup","ngSubmit"],[1,"form-label","flex-gap-10"],["for","title"],["class","form-error",4,"ngIf"],["formControlName","name","type","text","id","title","name","title"],["for","description"],["formControlName","description","type","text","id","description","name","description",1,"large","description"],["for","date"],["formControlName","date","type","date","id","date","name","date",1,"small"],["for","duration"],[1,"duration"],["formControlName","length","type","number","id","duration","name","duration",1,"small"],["duration",""],["for","authors"],[1,"flex-gap-10"],["formControlName","authorsInput","id","authors","list","authors-dropdown","name","authors",1,"small"],["authorsInput",""],["type","button",1,"btn",3,"disabled","click"],["id","authors-dropdown"],[4,"ngFor","ngForOf"],[1,"authors-container"],[3,"author","removeAuthorEvent",4,"ngFor","ngForOf"],[1,"buttons"],["type","submit",1,"btn",3,"disabled"],["type","button",1,"btn","btn-red",3,"click"],[1,"form-error"],[4,"ngIf"],[3,"author","removeAuthorEvent"]],template:function(o,n){if(1&o){const i=t.EpF();t._UZ(0,"app-breadcrumbs"),t.TgZ(1,"div",0),t.TgZ(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"form",1),t.NdJ("ngSubmit",function(){return n.save()}),t.TgZ(5,"div",2),t.TgZ(6,"label",3),t._uU(7,"Title:"),t.qZA(),t.YNc(8,b,4,3,"div",4),t.qZA(),t._UZ(9,"input",5),t.TgZ(10,"div",2),t.TgZ(11,"label",6),t._uU(12,"Description:"),t.qZA(),t.YNc(13,O,3,2,"div",4),t.qZA(),t._UZ(14,"textarea",7),t.TgZ(15,"div",2),t.TgZ(16,"label",8),t._uU(17,"Date:"),t.qZA(),t.YNc(18,w,2,1,"div",4),t.qZA(),t._UZ(19,"input",9),t.TgZ(20,"div",2),t.TgZ(21,"label",10),t._uU(22,"Duration:"),t.qZA(),t.YNc(23,P,2,1,"div",4),t.qZA(),t.TgZ(24,"div",11),t._UZ(25,"input",12,13),t.TgZ(27,"span"),t._uU(28),t.ALo(29,"duration"),t.qZA(),t.qZA(),t.TgZ(30,"div",2),t.TgZ(31,"label",14),t._uU(32,"Authors:"),t.qZA(),t.YNc(33,q,3,0,"div",4),t.qZA(),t.TgZ(34,"div",15),t._UZ(35,"input",16,17),t.TgZ(37,"button",18),t.NdJ("click",function(){t.CHM(i);const p=t.MAs(36);return n.addAuthor(p)}),t._uU(38," Add "),t.qZA(),t.qZA(),t.TgZ(39,"datalist",19),t.YNc(40,N,3,3,"option",20),t.qZA(),t.TgZ(41,"div",21),t.YNc(42,y,1,1,"app-authors",22),t.qZA(),t.TgZ(43,"div",23),t.TgZ(44,"button",24),t._uU(45," Save "),t.qZA(),t.TgZ(46,"button",25),t.NdJ("click",function(){return n.close()}),t._uU(47," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const i=t.MAs(26),d=t.MAs(36);t.xp6(3),t.hij("",n.heading," course"),t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(4),t.Q6J("ngIf",n.isFieldInvalid("name")),t.xp6(5),t.Q6J("ngIf",n.isFieldInvalid("description")),t.xp6(5),t.Q6J("ngIf",n.isFieldInvalid("date")),t.xp6(5),t.Q6J("ngIf",n.isFieldInvalid("length")),t.xp6(5),t.Oqu(t.lcZ(29,12,+i.value)),t.xp6(5),t.Q6J("ngIf",n.isAuthorsInvalid()),t.xp6(4),t.Q6J("disabled",!d.value),t.xp6(3),t.Q6J("ngForOf",n.authorControls.controls),t.xp6(2),t.Q6J("ngForOf",n.authorControls.controls),t.xp6(2),t.Q6J("disabled",n.formGroup.invalid)}},directives:[_.n,r._Y,r.JL,r.sg,u.O5,r.Fj,r.JJ,r.u,r.wV,u.sg,r.YN,r.Kr,C],pipes:[v.u,u.rS],styles:[".add-update-course-window[_ngcontent-%COMP%]{border:2px solid #777;background-color:#fff;box-sizing:border-box;padding:40px;height:-moz-fit-content;height:fit-content;width:1050px;position:fixed;display:flex;flex-direction:column;top:50%;left:50%;transform:translate(-50%,-50%)}.add-update-course-window[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:20px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{margin:20px 0 0;display:flex;flex-direction:column;row-gap:5px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{margin-top:10px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:30px;border:2px solid #b9b9b9;border-radius:5px;background-color:inherit;padding:5px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:14px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:solid red 2px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{resize:none}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{width:120px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{height:100px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:120px;margin-top:20px}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{color:#a10909}.add-update-course-window[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .authors-container[_ngcontent-%COMP%]{display:flex;gap:20px}"]}),e})()}];let Y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(J)],l.Bz]}),e})();var F=s(4263),G=s(4734);let Q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,r.u5,Y,F.t,G.J,r.UX]]}),e})()}}]);