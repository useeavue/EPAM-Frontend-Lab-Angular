<app-breadcrumbs></app-breadcrumbs>
<div class="add-update-course-window">
  <h1>{{ heading }} course</h1>
  <form class="form" [formGroup]="formGroup" novalidate (ngSubmit)="save()">
    <div class="form-label flex-gap-10">
      <label for="title">Title:</label>
      <p class="formError" *ngIf="isFieldInvalid('name')">Required field</p>
    </div>
    <input formControlName="name" type="text" id="title" name="title" />
    <div class="form-label flex-gap-10">
      <label for="description">Description:</label>
      <p class="formError" *ngIf="isFieldInvalid('description')">
        Required field
      </p>
    </div>
    <textarea
      formControlName="description"
      class="large description"
      type="text"
      id="description"
      name="description"
    ></textarea>
    <div class="form-label flex-gap-10">
      <label for="date">Date:</label>
      <p class="formError" *ngIf="isFieldInvalid('date')">Required field</p>
    </div>
    <input
      formControlName="date"
      class="small"
      type="date"
      id="date"
      name="date"
    />
    <div class="form-label flex-gap-10">
      <label for="duration">Duration:</label>
      <p class="formError" *ngIf="isFieldInvalid('length')">Required field</p>
    </div>
    <div class="duration">
      <input
        #duration
        formControlName="length"
        class="small"
        type="number"
        id="duration"
        name="duration"
      />
      <span>{{ +duration.value | duration }}</span>
    </div>
    <div class="form-label flex-gap-10">
      <label for="authors">Authors:</label>
      <p class="formError" *ngIf="isAuthorsInvalid()">
        Should be at least 1 author
      </p>
    </div>
    <div class="flex-gap-10">
      <input
        #authorsInput
        formControlName="authors"
        class="small"
        id="authors"
        list="authors-dropdown"
        name="authors"
      />
      <button class="btn" type="button" (click)="addAuthor(authorsInput)">
        Add
      </button>
    </div>

    <datalist id="authors-dropdown">
      <option *ngFor="let author of authors">
        {{ author.firstName + " " + author.lastName | titlecase }}
      </option>
    </datalist>
    <div class="authors-container">
      <app-authors
        *ngFor="let author of authors"
        [author]="author"
        (removeAuthorEvent)="removeAuthor($event)"
      ></app-authors>
    </div>
    <div class="buttons">
      <button class="btn" type="submit" [disabled]="formGroup.invalid">
        Save
      </button>
      <button class="btn btn-red" type="button" (click)="close()">
        Cancel
      </button>
    </div>
  </form>
</div>
